name: Verify Attestation

on:
  workflow_call:

jobs:
  verify-attestation:
    runs-on: ubuntu-latest
    permissions:
      id-token: write
    steps:

    - name: Verify attestation
      id: verification
      uses: kipz/url-oracle@fba3ac874978bb5a2bb991dd8a1659ff69b6d575
      with:
        command: verify_attestation
        attestation_file: "/github/workspace/attestation.json"
        commit_sha: fba3ac874978bb5a2bb991dd8a1659ff69b6d575

    - name: Comment on commit (if possible)
      run: |
        echo "ğŸ” Verification completed for commit 8e7535bfa0b3b77ce1afe1902d8ff1407cfcf8a8
        echo "ğŸ“‹ Summary: Attestation verified successfully"
